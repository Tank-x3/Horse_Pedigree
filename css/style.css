/* 基本スタイル */
:root {
    --sire-bg-color: #e0f0ff; /* 水色 */
    --dam-bg-color: #ffeeff;  /* ピンク色 */
    --border-color: #aaa;
    --header-height: 50px;
}

body {
    font-family: sans-serif;
    margin: 0;
    background-color: #f4f4f4;
}

/* モーダル */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    display: flex; justify-content: center; align-items: center;
    z-index: 1000;
}
.modal {
    background-color: white; padding: 20px 40px; border-radius: 8px; text-align: center;
}
.modal-buttons {
    margin-top: 20px; display: flex; gap: 10px;
}
.modal-buttons button {
    padding: 10px 20px; cursor: pointer;
}
.hidden { display: none !important; }

/* ヘッダー */
.main-header {
    background-color: #333; color: white; padding: 0 20px;
    display: flex; justify-content: space-between; align-items: center;
    height: var(--header-height); box-sizing: border-box;
}
.header-group { display: flex; gap: 10px; }
.main-header button { padding: 5px 10px; }

/* スマホ用タブ */
.tab-container { display: none; } /* PCでは非表示 */

/* メインコンテンツ */
.main-container {
    display: flex; padding: 20px; gap: 20px;
}

.form-container {
    flex: 0 0 420px; /* 固定幅 */
}
.preview-container {
    flex: 1 1 auto; /* 残りの可変幅 */
}
.form-container, .preview-container {
    background-color: white; padding: 20px; border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    height: fit-content; max-height: calc(100vh - var(--header-height) - 40px);
    overflow-y: auto;
}

/* 入力フォーム */
.generation-selector { margin-bottom: 20px; }
.horse-input-group {
    margin-bottom: 10px; border-left: 3px solid var(--border-color); padding-left: 10px;
}
.horse-input-group h3, .horse-input-group h4, .horse-input-group h5 {
    margin: 0 0 5px 0; font-size: 1em;
}
.horse-input-group h5 { display: inline-block; width: 60px; font-weight: normal; }
[data-generation="2"] { padding-left: 15px; }
[data-generation="3"] { padding-left: 30px; }
[data-generation="4"], [data-generation="5"] { padding-left: 45px; }

.horse-input-group input[type="text"] { width: 13em; padding: 5px; margin-right: 5px; }
.horse-input-group input[type="number"] { width: 7ch; padding: 5px; }

/* オートコンプリート */
.autocomplete-wrapper { position: relative; }
.autocomplete-suggestions {
    position: absolute;
    top: 100%;
    left: 0;
    width: 13em;
    max-height: 150px;
    overflow-y: auto;
    background: white;
    border: 1px solid #ccc;
    z-index: 999;
    box-sizing: border-box;
}
.autocomplete-suggestion {
    padding: 8px;
    cursor: pointer;
}
.autocomplete-suggestion:hover, .autocomplete-suggestion.active {
    background-color: #f0f0f0;
}


/* 血統表プレビュー */
.pedigree-table-wrapper { overflow-x: auto; }
.pedigree-table {
    width: 100%; border-collapse: collapse; font-size: 13px; min-width: 550px;
}
.pedigree-cell {
    border: 1px solid var(--border-color); padding: 5px;
    vertical-align: middle; text-align: center;
    width: 13em;
    min-height: 2.2em; /* 全てのセルに2行分の高さを確保 */
    box-sizing: border-box;
}
.pedigree-cell span {
    display: block; /* 馬名と生年が縦に並ぶように */
}
.pedigree-cell small { 
    display: block; color: #555; font-size: 0.9em; min-height: 1.1em;
}
.sire-cell { background-color: var(--sire-bg-color); }
.dam-cell { background-color: var(--dam-bg-color); }

/* 5代目表示の特別ルール */
.pedigree-cell[data-col="5"] span {
    display: inline; /* 1行表示のためインラインに */
    white-space: nowrap; /* 折り返しを防ぐ */
    overflow: hidden;
    text-overflow: ellipsis; /* はみ出した場合に...で表示 */
    max-width: 100%;
}
.pedigree-cell[data-col="5"] small {
    display: none; /* 5代目の生年表示(<small>)は非表示に */
}


/* レスポンシブ対応 (900px以下でタブUIに) */
@media (max-width: 900px) {
    .main-header { font-size: 0.8em; }
    .tab-container {
        display: flex; background-color: #f4f4f4;
    }
    .tab-button {
        flex: 1; padding: 10px; border: none; background-color: #ddd;
        border-bottom: 2px solid transparent;
    }
    .tab-button.active {
        background-color: white; border-bottom: 2px solid #333; font-weight: bold;
    }
    .main-container {
        display: block; padding: 0;
    }
    .tab-content {
        display: none; border-radius: 0;
        max-height: calc(100vh - var(--header-height) - 42px);
    }
    .tab-content.active {
        display: block;
    }
    .form-container { 
        width: auto; padding: 15px;
    }
    .horse-input-group {
        width: fit-content;
        margin-left: auto;
        margin-right: auto;
    }
    .preview-container { width: auto; padding: 15px; }
    .pedigree-table { font-size: 12px; }
}